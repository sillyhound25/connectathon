<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>Logger</title>

    <script src="js/libs/jquery-1.9.0.min.js"></script>
    <script src="js/libs/handlebars-v1.3.0.js"></script>
    <script src="js/libs/underscore-min.js"></script>
    <script src="js/libs/bootstrap.min.js"></script>
    <script src="js/libs/moment.min.js"></script>


    <!-- Latest compiled and minified CSS-->
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap-theme.min.css">

    <link rel="stylesheet" href="css/font-awesome.min.css">
    <link rel="stylesheet" href="css/selectize.bootstrap3.css">

</head>
<body style="padding: 8px">
<h1>Logger</h1>

<div id="lstLog"></div>

<script>
    $(document).ready(function(){


        Handlebars.registerHelper('myDate',function(daString) {
            var s = "";
            var formatStr = "YYYY-MM-DD:HH:mm z";
            return moment(daString).format(formatStr);
        });


        $.get("/admin/log/summary",function(data){
            console.log(data);

            var template = Handlebars.compile($('#saveButtonTemplate').html())
            $('#lstLog').html(template({items:data}));

        })
    });

</script>

<script type="handlebars/template" id='saveButtonTemplate'>
    <h5>Log entries</h5>
            <table class="table table-bordered table-condensed">
                {{#each items}}
                    <tr>
                        <td>{{myDate time}}</td>
                        <td>{{method}}</td>
                        <td>{{statusCode}}</td>
                        <td>{{uri}}</td>
                    </tr>
                {{/each}}
            </table>

</script>

</body>
</html>